# Vertx Protobuf Benchmark

The goal of this repository is to benchmark and compare the performance of JSON (Jackson library) against codecs generated by Google Protoc and Vertx Protobuf Codegen.

## Building the project
```bash
mvn clean install
```

## Running the benchmark
```bash
java -jar benchmark/target/benchmark-1.0.0-SNAPSHOT-fat.jar 
```

## Async Profiler
### Install
```bash
mkdir profiler
cd profiler
wget https://github.com/async-profiler/async-profiler/releases/download/v2.10/async-profiler-2.10-linux-x64.tar.gz
tar -xzf async-profiler-2.10-linux-x64.tar.gz -C . --strip-components=1 async-profiler-2.10-linux-x64/lib/
```

### Enable
```bash
sudo sysctl -w kernel.perf_event_paranoid=1
sudo sysctl -w kernel.kptr_restrict=0
```

### Run
```bash
java -Dprofiler=true -Djava.library.path=profiler/lib -jar benchmark/target/grpc-benchmark-1.0.0-SNAPSHOT-fat.jar
```